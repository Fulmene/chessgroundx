!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chessground=e()}}((function(){return function e(t,o,n){function r(s,a){if(!o[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[s]={exports:{}};t[s][0].call(d.exports,(function(e){return r(t[s][1][e]||e)}),d,d.exports,e,t,o,n)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util");function r(e,t){const o=e(t);return t.dom.redraw(),o}function i(e,t,o){return{key:e,pos:n.key2pos(e,o),piece:t}}function s(e){for(let t in e)return!1;return!0}o.anim=function(e,t){return t.animation.enabled?function(e,t){const o=Object.assign({},t.pieces),r=e(t),a=function(e,t){const o=10===t.dimensions.height,r={},s=[],a={},c=[],l=[],d={};let u,p,h,f;for(h in e)d[h]=i(h,e[h],o);for(const g of n.allKeys[t.geometry])u=t.pieces[g],p=d[g],u?p?n.samePiece(u,p.piece)||(c.push(p),l.push(i(g,u,o))):l.push(i(g,u,o)):p&&c.push(p);return l.forEach(e=>{var t,o;t=e,o=c.filter(t=>n.samePiece(e.piece,t.piece)),p=o.sort((e,o)=>n.distanceSq(t.pos,e.pos)-n.distanceSq(t.pos,o.pos))[0],p&&(f=[p.pos[0]-e.pos[0],p.pos[1]-e.pos[1]],r[e.key]=f.concat(f),s.push(p.key))}),c.forEach(e=>{n.containsX(s,e.key)||(a[e.key]=e.piece)}),{anims:r,fadings:a}}(o,t);if(s(a.anims)&&s(a.fadings))t.dom.redraw();else{const e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:a},e||function e(t,o){const n=t.animation.current;if(void 0===n)return void(t.dom.destroyed||t.dom.redrawNow());const r=1-(o-n.start)*n.frequency;if(r<=0)t.animation.current=void 0,t.dom.redrawNow();else{const o=(i=r)<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1;for(let e in n.plan.anims){const t=n.plan.anims[e];t[2]=t[0]*o,t[3]=t[1]*o}t.dom.redrawNow(!0),requestAnimationFrame((o=performance.now())=>e(t,o))}var i}(t,performance.now())}return r}(e,t):r(e,t)},o.render=r},{"./util":18}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./board"),r=e("./fen"),i=e("./config"),s=e("./anim"),a=e("./drag"),c=e("./explosion");o.start=function(e,t){function o(){n.toggleOrientation(e),t()}return{set(t){t.orientation&&t.orientation!==e.orientation&&o(),(t.fen?s.anim:s.render)(e=>i.configure(e,t),e)},state:e,getFen:()=>r.write(e.pieces,e.geometry),toggleOrientation:o,setPieces(t){s.anim(e=>n.setPieces(e,t),e)},selectSquare(t,o){t?s.anim(e=>n.selectSquare(e,t,o),e):e.selected&&(n.unselect(e),e.dom.redraw())},move(t,o){s.anim(e=>n.baseMove(e,t,o),e)},newPiece(t,o){s.anim(e=>n.baseNewPiece(e,t,o),e)},playPremove(){if(e.premovable.current){if(s.anim(n.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){const o=n.playPredrop(e,t);return e.dom.redraw(),o}return!1},cancelPremove(){s.render(n.unsetPremove,e)},cancelPredrop(){s.render(n.unsetPredrop,e)},cancelMove(){s.render(e=>{n.cancelMove(e),a.cancel(e)},e)},stop(){s.render(e=>{n.stop(e),a.cancel(e)},e)},explode(t){c.default(e,t)},setAutoShapes(t){s.render(e=>e.drawable.autoShapes=t,e)},setShapes(t){s.render(e=>e.drawable.shapes=t,e)},getKeyAtDomPos:t=>n.getKeyAtDomPos(t,n.whitePov(e),e.dom.bounds(),e.geometry),redrawAll:t,dragNewPiece(t,o,n){a.dragNewPiece(e,t,o,n)},destroy(){n.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},{"./anim":1,"./board":3,"./config":5,"./drag":6,"./explosion":10,"./fen":11}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util"),r=e("./premove"),i=e("./types");function s(e,...t){e&&setTimeout(()=>e(...t),1)}function a(e){e.premovable.current&&(e.premovable.current=void 0,s(e.premovable.events.unset))}function c(e){const t=e.predroppable;t.current&&(t.current=void 0,s(t.events.unset))}function l(e,t,o){const r=e.pieces[t],i=e.pieces[o];if(t===o||!r)return!1;const a=i&&i.color!==r.color?i:void 0;return o==e.selected&&f(e),s(e.events.move,t,o,a),function(e,t,o){if(!e.autoCastle)return!1;const r=e.pieces[t];if(!r||"king"!==r.role)return!1;const i=10===e.dimensions.height,s=n.key2pos(t,i);if(5!==s[0])return!1;if(1!==s[1]&&8!==s[1])return!1;const a=n.key2pos(o,i);let c,l,d;if(7===a[0]||8===a[0])c=n.pos2key([8,s[1]],e.geometry),l=n.pos2key([6,s[1]],e.geometry),d=n.pos2key([7,s[1]],e.geometry);else{if(3!==a[0]&&1!==a[0])return!1;c=n.pos2key([1,s[1]],e.geometry),l=n.pos2key([4,s[1]],e.geometry),d=n.pos2key([3,s[1]],e.geometry)}const u=e.pieces[c];return!(!u||"rook"!==u.role)&&(delete e.pieces[t],delete e.pieces[c],e.pieces[d]=r,e.pieces[l]=u,!0)}(e,t,o)||(e.pieces[o]=r,delete e.pieces[t]),e.lastMove=[t,o],e.check=void 0,s(e.events.change),a||!0}function d(e,t,o,r){if(e.pieces[o]){if(!r)return!1;delete e.pieces[o]}return s(e.events.dropNewPiece,t,o),e.pieces[o]=t,e.lastMove=[o],e.check=void 0,s(e.events.change),e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),!0}function u(e,t,o){const r=l(e,t,o);return r&&(e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),e.animation.current=void 0),r}function p(e,t,o){if(m(e,t,o)){const n=u(e,t,o);if(n){const r=e.hold.stop();f(e);const i={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:r};return!0!==n&&(i.captured=n),s(e.movable.events.after,t,o,i),!0}}else if(function(e,t,o){return t!==o&&b(e,t)&&n.containsX(r.default(e.pieces,t,e.premovable.castle,e.geometry,e.variant),o)}(e,t,o))return function(e,t,o,n){c(e),e.premovable.current=[t,o],s(e.premovable.events.set,t,o,n)}(e,t,o,{ctrlKey:e.stats.ctrlKey}),f(e),!0;return f(e),!1}function h(e,t){e.selected=t,b(e,t)?e.premovable.dests=r.default(e.pieces,t,e.premovable.castle,e.geometry,e.variant):e.premovable.dests=void 0}function f(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function g(e,t){const o=e.pieces[t];return!!o&&("both"===e.movable.color||e.movable.color===o.color&&e.turnColor===o.color)}function m(e,t,o){return t!==o&&g(e,t)&&(e.movable.free||!!e.movable.dests&&n.containsX(e.movable.dests[t],o))}function b(e,t){const o=e.pieces[t];return!!o&&e.premovable.enabled&&e.movable.color===o.color&&e.turnColor!==o.color}function v(e){a(e),c(e),f(e)}o.callUserFunction=s,o.toggleOrientation=function(e){e.orientation=n.opposite(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0},o.reset=function(e){e.lastMove=void 0,f(e),a(e),c(e)},o.setPieces=function(e,t){for(let o in t){const n=t[o];n?e.pieces[o]=n:delete e.pieces[o]}},o.setCheck=function(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t)for(let o in e.pieces)"king"===e.pieces[o].role&&e.pieces[o].color===t&&(e.check=o)},o.unsetPremove=a,o.unsetPredrop=c,o.baseMove=l,o.baseNewPiece=d,o.userMove=p,o.dropNewPiece=function(e,t,o,n){if(function(e,t,o){const n=e.pieces[t];return!!n&&o&&(t===o||!e.pieces[o])&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}(e,t,o)||n){const r=e.pieces[t];delete e.pieces[t],d(e,r,o,n),s(e.movable.events.afterNewPiece,r.role,o,{predrop:!1})}else!function(e,t,o){const n=e.pieces[t],r=e.pieces[o];return!!n&&o&&(!r||r.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==n.role||"1"!==o[1]&&"8"!==o[1])&&e.movable.color===n.color&&e.turnColor!==n.color}(e,t,o)?(a(e),c(e)):function(e,t,o){a(e),e.predroppable.current={role:t,key:o},s(e.predroppable.events.set,t,o)}(e,e.pieces[t].role,o);delete e.pieces[t],f(e)},o.selectSquare=function(e,t,o){if(s(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled)return f(e),void e.hold.cancel();if((e.selectable.enabled||o)&&e.selected!==t&&p(e,e.selected,t))return void(e.stats.dragged=!1)}(g(e,t)||b(e,t))&&(h(e,t),e.hold.start())},o.setSelected=h,o.unselect=f,o.canMove=m,o.isDraggable=function(e,t){const o=e.pieces[t];return!!o&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===o.color&&(e.turnColor===o.color||e.premovable.enabled))},o.playPremove=function(e){const t=e.premovable.current;if(!t)return!1;const o=t[0],n=t[1];let r=!1;if(m(e,o,n)){const t=u(e,o,n);if(t){const i={premove:!0};!0!==t&&(i.captured=t),s(e.movable.events.after,o,n,i),r=!0}}return a(e),r},o.playPredrop=function(e,t){let o=e.predroppable.current,n=!1;if(!o)return!1;if(t(o)){d(e,{role:o.role,color:e.movable.color},o.key)&&(s(e.movable.events.afterNewPiece,o.role,o.key,{predrop:!0}),n=!0)}return c(e),n},o.cancelMove=v,o.stop=function(e){e.movable.color=e.movable.dests=e.animation.current=void 0,v(e)},o.getKeyAtDomPos=function(e,t,o,r){const s=i.dimensions[r];let a=Math.ceil(s.width*((e[0]-o.left)/o.width));t||(a=s.width+1-a);let c=Math.ceil(s.height-s.height*((e[1]-o.top)/o.height));return t||(c=s.height+1-c),a>0&&a<s.width+1&&c>0&&c<s.height+1?n.pos2key([a,c],r):void 0},o.whitePov=function(e){return"white"===e.orientation}},{"./premove":13,"./types":17,"./util":18}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./api"),r=e("./config"),i=e("./state"),s=e("./wrap"),a=e("./events"),c=e("./render"),l=e("./svg"),d=e("./util");function u(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}o.Chessground=function(e,t){const o=i.defaults();function p(){let t=o.dom&&o.dom.unbind;const n=o.viewOnly&&!o.drawable.visible,r=s.default(e,o,n),i=d.memo(()=>r.board.getBoundingClientRect()),h=e=>{c.default(o),!e&&r.svg&&l.renderSvg(o,r.svg)};o.dom={elements:r,bounds:i,redraw:u(h),redrawNow:h,unbind:t,relative:n},o.drawable.prevSvgHash="",h(!1),a.bindBoard(o),t||(o.dom.unbind=a.bindDocument(o,p)),o.events.insert&&o.events.insert(r)}return r.configure(o,t||{}),p(),n.start(o,p)}},{"./api":2,"./config":5,"./events":9,"./render":14,"./state":15,"./svg":16,"./util":18,"./wrap":19}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./board"),r=e("./fen"),i=e("./types");function s(e){return"object"==typeof e}o.configure=function(e,t){if(t.movable&&t.movable.dests&&(e.movable.dests=void 0),function e(t,o){for(let n in o)s(t[n])&&s(o[n])?e(t[n],o[n]):t[n]=o[n]}(e,t),t.geometry&&(e.dimensions=i.dimensions[t.geometry]),t.fen){const o=r.read(t.fen,e.geometry);void 0!==e.pieces.z0&&(o.z0=e.pieces.z0),e.pieces=o,e.drawable.shapes=[]}if(t.hasOwnProperty("check")&&n.setCheck(e,t.check||!1),t.hasOwnProperty("lastMove")&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&n.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){const t="white"===e.movable.color?1:8,o="e"+t,n=e.movable.dests[o],r=e.pieces[o];if(!n||!r||"king"!==r.role)return;e.movable.dests[o]=n.filter(e=>!(e==="a"+t&&-1!==n.indexOf("c"+t)||e==="h"+t&&-1!==n.indexOf("g"+t)))}}},{"./board":3,"./fen":11,"./types":17}],6:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./board"),r=e("./util"),i=e("./draw"),s=e("./anim");function a(e,t){const o=n.whitePov(e),i=e.dom.bounds(),s=Math.pow(i.width/8,2);for(let n in e.pieces){const a=u(n,o,i,e.dimensions),c=[a.left+a.width/2,a.top+a.height/2];if(r.distanceSq(c,t)<=s)return!0}return!1}function c(e){requestAnimationFrame(()=>{const t=e.draggable.current;if(!t)return;e.animation.current&&e.animation.current.plan.anims[t.orig]&&(e.animation.current=void 0);const o=e.pieces[t.orig];if(o&&r.samePiece(o,t.piece)){if(!t.started&&r.distanceSq(t.epos,t.rel)>=Math.pow(e.draggable.distance,2)&&(t.started=!0),t.started){if("function"==typeof t.element){const e=t.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),t.element=e}t.pos=[t.epos[0]-t.rel[0],t.epos[1]-t.rel[1]];const o=r.posToTranslateAbs(e.dom.bounds(),e.dimensions)(t.origPos,n.whitePov(e));o[0]+=t.pos[0]+t.dec[0],o[1]+=t.pos[1]+t.dec[1],r.translateAbs(t.element,o)}}else l(e);c(e)})}function l(e){const t=e.draggable.current;t&&(t.newPiece&&delete e.pieces[t.orig],e.draggable.current=void 0,n.unselect(e),d(e),e.dom.redraw())}function d(e){const t=e.dom.elements;t.ghost&&r.setVisible(t.ghost,!1)}function u(e,t,o,n){const i=10===n.height,s=r.key2pos(e,i);return t||(s[0]=n.width+1-s[0],s[1]=n.height+1-s[1]),{left:o.left+o.width*(s[0]-1)/n.width,top:o.top+o.height*(n.height-s[1])/n.height,width:o.width/n.width,height:o.height/n.height}}function p(e,t){let o=e.dom.elements.board.firstChild;for(;o;){if(o.cgKey===t&&"PIECE"===o.tagName)return o;o=o.nextSibling}}o.start=function(e,t){if(void 0!==t.button&&0!==t.button)return;if(t.touches&&t.touches.length>1)return;const o=e.dom.bounds(),l=r.eventPosition(t),d=n.getKeyAtDomPos(l,n.whitePov(e),o,e.geometry);if(!d)return;const h=e.pieces[d],f=e.selected;f||!e.drawable.enabled||!e.drawable.eraseOnClick&&h&&h.color===e.turnColor||i.clear(e),!1===t.cancelable||t.touches&&e.movable.color&&!h&&!f&&!a(e,l)||t.preventDefault();const g=!!e.premovable.current,m=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&n.canMove(e,e.selected,d)?s.anim(e=>n.selectSquare(e,d),e):n.selectSquare(e,d);const b=e.selected===d,v=p(e,d),w=10===e.dimensions.height;if(h&&v&&b&&n.isDraggable(e,d)){const i=u(d,n.whitePov(e),o,e.dimensions);e.draggable.current={orig:d,origPos:r.key2pos(d,w),piece:h,rel:l,epos:l,pos:[0,0],dec:e.draggable.centerPiece?[l[0]-(i.left+i.width/2),l[1]-(i.top+i.height/2)]:[0,0],started:e.draggable.autoDistance&&e.stats.dragged,element:v,previouslySelected:f,originTarget:t.target},v.cgDragging=!0,v.classList.add("dragging");const s=e.dom.elements.ghost;s&&(s.className=`ghost ${h.color} ${h.role}`,r.translateAbs(s,r.posToTranslateAbs(o,e.dimensions)(r.key2pos(d,w),n.whitePov(e))),r.setVisible(s,!0)),c(e)}else g&&n.unsetPremove(e),m&&n.unsetPredrop(e);e.dom.redraw()},o.pieceCloseTo=a,o.dragNewPiece=function(e,t,o,i){e.pieces.z0=t,e.dom.redraw();const s=r.eventPosition(o),a=n.whitePov(e),l=e.dom.bounds(),d=u("z0",a,l,e.dimensions),h=[(a?0:e.dimensions.width-1)*d.width+l.left,(a?e.dimensions.height:-1)*d.height+l.top];e.draggable.current={orig:"z0",origPos:r.key2pos("a0",!1),piece:t,rel:h,epos:s,pos:[s[0]-h[0],s[1]-h[1]],dec:[-d.width/2,-d.height/2],started:!0,element:()=>p(e,"z0"),originTarget:o.target,newPiece:!0,force:!!i},c(e)},o.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.epos=r.eventPosition(t))},o.end=function(e,t){const o=e.draggable.current;if(!o)return;if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&o&&o.originTarget!==t.target&&!o.newPiece)return void(e.draggable.current=void 0);n.unsetPremove(e),n.unsetPredrop(e);const i=r.eventPosition(t)||o.epos,s=n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds(),e.geometry);s&&o.started&&o.orig!==s?o.newPiece?n.dropNewPiece(e,o.orig,s,o.force):(e.stats.ctrlKey=t.ctrlKey,n.userMove(e,o.orig,s)&&(e.stats.dragged=!0)):o.newPiece?delete e.pieces[o.orig]:e.draggable.deleteOnDropOff&&!s&&(delete e.pieces[o.orig],n.callUserFunction(e.events.change)),(!o||o.orig!==o.previouslySelected||o.orig!==s&&s)&&e.selectable.enabled||n.unselect(e),d(e),e.draggable.current=void 0,e.dom.redraw()},o.cancel=l},{"./anim":1,"./board":3,"./draw":7,"./util":18}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./board"),r=e("./util"),i=["green","red","blue","yellow"];function s(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const o=n.getKeyAtDomPos(t.pos,n.whitePov(e),e.dom.bounds(),e.geometry);o!==t.mouseSq&&(t.mouseSq=o,t.dest=o!==t.orig?o:void 0,e.dom.redrawNow()),s(e)}})}function a(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function c(e){return i[((e.shiftKey||e.ctrlKey)&&r.isRightButton(e)?1:0)+(e.altKey?2:0)]}function l(e){e.onChange&&e.onChange(e.shapes)}o.start=function(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?n.unselect(e):n.cancelMove(e);const o=r.eventPosition(t),i=n.getKeyAtDomPos(o,n.whitePov(e),e.dom.bounds(),e.geometry);i&&(e.drawable.current={orig:i,pos:o,brush:c(t)},s(e))},o.processDraw=s,o.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=r.eventPosition(t))},o.end=function(e){const t=e.drawable.current;t&&(t.mouseSq&&function(e,t){const o=e=>e.orig===t.orig&&e.dest===t.dest,n=e.shapes.filter(o)[0];n&&(e.shapes=e.shapes.filter(e=>!o(e)));n&&n.brush===t.brush||e.shapes.push(t);l(e)}(e.drawable,t),a(e))},o.cancel=a,o.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),l(e.drawable))}},{"./board":3,"./util":18}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./board"),r=e("./util"),i=e("./drag");o.setDropMode=function(e,t){e.dropmode={active:!0,piece:t},i.cancel(e)},o.cancelDropMode=function(e){e.dropmode={active:!1}},o.drop=function(e,t){if(!e.dropmode.active)return;n.unsetPremove(e),n.unsetPredrop(e);const o=e.dropmode.piece;if(o){e.pieces.z0=o;const i=r.eventPosition(t),s=i&&n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds(),e.geometry);s&&n.dropNewPiece(e,"z0",s)}e.dom.redraw()}},{"./board":3,"./drag":6,"./util":18}],9:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./drag"),r=e("./draw"),i=e("./drop"),s=e("./util");function a(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o)}function c(e,t,o){return n=>{n.shiftKey||s.isRightButton(n)?e.drawable.enabled&&o(e,n):e.viewOnly||t(e,n)}}o.bindBoard=function(e){if(e.viewOnly)return;const t=e.dom.elements.board,o=function(e){return t=>{e.draggable.current?n.cancel(e):e.drawable.current?r.cancel(e):t.shiftKey||s.isRightButton(t)?e.drawable.enabled&&r.start(e,t):e.viewOnly||(e.dropmode.active?i.drop(e,t):n.start(e,t))}}(e);t.addEventListener("touchstart",o,{passive:!1}),t.addEventListener("mousedown",o,{passive:!1}),(e.disableContextMenu||e.drawable.enabled)&&t.addEventListener("contextmenu",e=>e.preventDefault())},o.bindDocument=function(e,t){const o=[];if(!e.dom.relative&&e.resizable){const n=()=>{e.dom.bounds.clear(),requestAnimationFrame(t)};o.push(a(document.body,"chessground.resize",n))}if(!e.viewOnly){const t=c(e,n.move,r.move),i=c(e,n.end,r.end);["touchmove","mousemove"].forEach(e=>o.push(a(document,e,t))),["touchend","mouseup"].forEach(e=>o.push(a(document,e,i)));const s=()=>e.dom.bounds.clear();o.push(a(window,"scroll",s,{passive:!0})),o.push(a(window,"resize",s,{passive:!0}))}return()=>o.forEach(e=>e())}},{"./drag":6,"./draw":7,"./drop":8,"./util":18}],10:[function(e,t,o){"use strict";function n(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{n(e,2),setTimeout(()=>n(e,void 0),120)},120)}},{}],11:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util"),r=e("./types");o.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";const i={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king",m:"met",f:"ferz",s:"silver",c:"cancellor",a:"archbishop",h:"hawk",e:"elephant"},s={p:"pawn",r:"rook",n:"knight",b:"bishop",k:"king",g:"gold",s:"silver",l:"lance"},a={p:"pawn",r:"rook",n:"knight",b:"bishop",k:"king",c:"cannon",a:"advisor"},c={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k",met:"m",ferz:"f",silver:"s",cancellor:"c",archbishop:"a",hawk:"h",elephant:"e",ppawn:"+p",pknight:"+n",pbishop:"+b",prook:"+r",pferz:"+f"},l={pawn:"p",rook:"r",knight:"n",bishop:"b",king:"k",gold:"g",silver:"s",lance:"l",ppawn:"+p",pknight:"+n",pbishop:"+b",prook:"+r",psilver:"+s",plance:"+l"},d={pawn:"p",rook:"r",knight:"n",bishop:"b",king:"k",cannon:"c",advisor:"a"};o.read=function(e,t){"start"===e&&(e=o.initial),-1!==e.indexOf("[")&&(e=e.slice(0,e.indexOf("[")));const r={};let c=e.split("/").length,l=0,d=!1;const u=3===t||6===t?a:1===t||5===t?s:i;for(const o of e)switch(o){case" ":return r;case"/":if(--c,0===c)return r;l=0;break;case"+":d=!0;break;case"~":const e=r[n.pos2key([l,c],t)];e&&(e.promoted=!0,"met"==e.role&&(e.role="ferz"));break;default:const i=o.charCodeAt(0);if(i<58)l+="0"===o?9:i-48;else{++l;const e=o.toLowerCase();let i={role:u[e],color:o===e?"black":"white"};d&&(i.role="p"+i.role,i.promoted=!0,d=!1),r[n.pos2key([l,c],t)]=i}}return r},o.write=function(e,t){var o={};switch(t){case 6:case 3:o=d;break;case 5:case 1:o=l;break;default:o=c}const i=r.dimensions[t];return n.invNRanks.slice(-i.height).map(r=>n.NRanks.slice(0,i.width).map(i=>{const s=e[n.pos2key([i,r],t)];if(s){const e=o[s.role]+(s.promoted&&"+"!==o[s.role].charAt(0)?"~":"");return"white"===s.color?e.toUpperCase():e}return"1"}).join("")).join("/").replace(/1{2,}/g,e=>e.length.toString())}},{"./types":17,"./util":18}],12:[function(e,t,o){t.exports=e("./chessground").Chessground},{"./chessground":4}],13:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util"),r=e("./types");function i(e,t){return Math.abs(e-t)}const s=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return 1===r&&2===s||2===r&&1===s},a=(e,t,o,n)=>i(e,o)===i(t,n),c=(e,t,o,n)=>e===o||t===n,l=(e,t,o,n)=>a(e,t,o,n)||c(e,t,o,n);const d=(e,t,o,n)=>i(e,o)===i(t,n)&&1===i(e,o),u=(e,t,o,n)=>a(e,t,o,n)||s(e,t,o,n),p=(e,t,o,n)=>c(e,t,o,n)||s(e,t,o,n),h=(e,t,o,n)=>b(e,t,o,n)||s(e,t,o,n);function f(e){return(t,o,n,r)=>d(t,o,n,r)||t===n&&("white"===e?r===o+1:r===o-1)}const g=(e,t,o,n)=>c(e,t,o,n)||i(e,o)<2&&i(t,n)<2,m=(e,t,o,n)=>a(e,t,o,n)||i(e,o)<2&&i(t,n)<2,b=(e,t,o,n)=>i(e,o)<2&&i(t,n)<2;const v=(e,t,o,n)=>i(e,o)===i(t,n)&&2===i(e,o),w=(e,t,o,n)=>i(e,o)===i(t,n)&&1===i(e,o),y=(e,t,o,n)=>(e===o||t===n)&&1===i(e,o),k=(e,t,o,n)=>i(e,o)===i(t,n)&&(1===i(e,o)||2===i(e,o)),P=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return 2===r&&3===s||3===r&&2===s};o.default=function(e,t,o,C,M){const O=10===r.dimensions[C].height,A=e[t],x=n.key2pos(t,O);let E;switch(C){case 6:case 3:switch(A.role){case"pawn":"janggi"===M?(S=A.color,E=(e,t,o,n)=>o===e&&("white"===S?n===t+1:n===t-1)||n===t&&(o===e+1||o===e-1)):E=function(e){return(t,o,n,r)=>n===t&&("white"===e?r===o+1:r===o-1)||r===o&&(n===t+1||n===t-1)&&("white"===e?o>5:o<6)}(A.color);break;case"cannon":case"rook":E=c;break;case"knight":E=s;break;case"bishop":E="janggi"===M?P:v;break;case"advisor":E=w;break;case"king":E=y}break;case 5:case 1:switch(A.role){case"pawn":E=function(e){return(t,o,n,r)=>n===t&&("white"===e?r===o+1:r===o-1)}(A.color);break;case"knight":E=function(e){return(t,o,n,r)=>"white"===e?r===o+2&&n===t-1||r===o+2&&n===t+1:r===o-2&&n===t-1||r===o-2&&n===t+1}(A.color);break;case"bishop":E=a;break;case"rook":E=c;break;case"king":E=b;break;case"silver":E=f(A.color);break;case"ppawn":case"plance":case"pknight":case"psilver":case"gold":E=function(e){return(t,o,n,r)=>i(t,n)<2&&i(o,r)<2&&("white"===e?!(n===t-1&&r===o-1||n===t+1&&r===o-1):!(n===t+1&&r===o+1||n===t-1&&r===o+1))}(A.color);break;case"lance":E=function(e){return(t,o,n,r)=>n===t&&("white"===e?r>o:r<o)}(A.color);break;case"prook":E=g;break;case"pbishop":E=m}break;default:switch(A.role){case"pawn":E=function(e){return(t,o,n,r)=>i(t,n)<2&&("white"===e?r===o+1||o<=2&&r===o+2&&t===n:r===o-1||o>=7&&r===o-2&&t===n)}(A.color);break;case"knight":E=s;break;case"pknight":E=h;break;case"bishop":E=a;break;case"rook":E=c;break;case"pferz":case"queen":E=l;break;case"ppawn":E=b;break;case"king":E=function(e,t,o){return(r,s,a,c)=>i(r,a)<2&&i(s,c)<2||o&&s===c&&s===("white"===e?1:8)&&(5===r&&(n.containsX(t,1)&&3===a||n.containsX(t,8)&&7===a)||n.containsX(t,a))}(A.color,function(e,t,o){const r="white"==t?"1":"8";return Object.keys(e).filter(o=>{const n=e[o];return o[1]===r&&n&&n.color===t&&"rook"===n.role}).map(e=>n.key2pos(e,o)[0])}(e,A.color,O),o);break;case"hawk":case"pbishop":case"archbishop":E=u;break;case"elephant":E="shako"===M?k:p;break;case"prook":case"cancellor":E="shako"===M?c:p;break;case"met":case"ferz":E=d;break;case"silver":E=f(A.color)}}var S;const _=n.allKeys[C],K=(e=>t=>n.pos2key(t,e))(C),j=(q=O,e=>n.key2pos(e,q));var q;return _.map(j).filter(e=>(x[0]!==e[0]||x[1]!==e[1])&&E(x[0],x[1],e[0],e[1])).map(K)}},{"./types":17,"./util":18}],14:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util"),r=e("./board"),i=e("./util");function s(e){return"PIECE"===e.tagName}function a(e){return"SQUARE"===e.tagName}function c(e,t){for(const o in t)e.dom.elements.board.removeChild(t[o])}function l(e,t){let o=2+8*(e[1]-1)+(8-e[0]);return t&&(o=67-o),o+""}function d(e){return`${e.color} ${e.role}`}function u(e,t,o){e[t]?e[t]+=" "+o:e[t]=o}o.default=function(e){const t=10===e.dimensions.height,o=r.whitePov(e),p=e.dom.relative?i.posToTranslateRel:i.posToTranslateAbs(e.dom.bounds(),e.dimensions),h=e.dom.relative?i.translateRel:i.translateAbs,f=e.dom.elements.board,g=e.pieces,m=e.animation.current,b=m?m.plan.anims:{},v=m?m.plan.fadings:{},w=e.draggable.current,y=function(e){const t={};let o,n;if(e.lastMove&&e.highlight.lastMove)for(o in e.lastMove)"z0"!=e.lastMove[o]&&u(t,e.lastMove[o],"last-move");e.check&&e.highlight.check&&u(t,e.check,"check");if(e.selected&&("z0"!=e.selected&&u(t,e.selected,"selected"),e.movable.showDests)){const r=e.movable.dests&&e.movable.dests[e.selected];if(r)for(o in r)n=r[o],u(t,n,"move-dest"+(e.pieces[n]?" oc":""));const i=e.premovable.dests;if(i)for(o in i)n=i[o],u(t,n,"premove-dest"+(e.pieces[n]?" oc":""))}const r=e.premovable.current;if(r)for(o in r)u(t,r[o],"current-premove");else e.predroppable.current&&u(t,e.predroppable.current.key,"current-premove");const i=e.exploding;if(i)for(o in i.keys)u(t,i.keys[o],"exploding"+i.stage);return t}(e),k={},P={},C={},M={},O=Object.keys(g);let A,x,E,S,_,K,j,q,D,N,T;for(E=f.firstChild;E;){if(A=E.cgKey,s(E))if(S=g[A],K=b[A],j=v[A],_=E.cgPiece,!E.cgDragging||w&&w.orig===A||(E.classList.remove("dragging"),h(E,p(n.key2pos(A,t),o,e.dimensions)),E.cgDragging=!1),!j&&E.cgFading&&(E.cgFading=!1,E.classList.remove("fading")),S){if(K&&E.cgAnimating&&_===d(S)){const r=n.key2pos(A,t);r[0]+=K[2],r[1]+=K[3],E.classList.add("anim"),h(E,p(r,o,e.dimensions))}else E.cgAnimating&&(E.cgAnimating=!1,E.classList.remove("anim"),h(E,p(n.key2pos(A,t),o,e.dimensions)),e.addPieceZIndex&&(E.style.zIndex=l(n.key2pos(A,t),o)));_!==d(S)||j&&E.cgFading?j&&_===d(j)?(E.classList.add("fading"),E.cgFading=!0):C[_]?C[_].push(E):C[_]=[E]:k[A]=!0}else C[_]?C[_].push(E):C[_]=[E];else if(a(E)){const e=E.className;y[A]===e?P[A]=!0:M[e]?M[e].push(E):M[e]=[E]}E=E.nextSibling}for(const r in y)if(!P[r]){N=M[y[r]],T=N&&N.pop();const i=p(n.key2pos(r,t),o,e.dimensions);if(T)T.cgKey=r,h(T,i);else{const e=n.createEl("square",y[r]);e.cgKey=r,h(e,i),f.insertBefore(e,f.firstChild)}}for(const r in O)if(A=O[r],x=g[A],K=b[A],!k[A])if(q=C[d(x)],D=q&&q.pop(),D){D.cgKey=A,D.cgFading&&(D.classList.remove("fading"),D.cgFading=!1);const r=n.key2pos(A,t);e.addPieceZIndex&&(D.style.zIndex=l(r,o)),K&&(D.cgAnimating=!0,D.classList.add("anim"),r[0]+=K[2],r[1]+=K[3]),h(D,p(r,o,e.dimensions))}else{const r=d(x),i=n.createEl("piece",r),s=n.key2pos(A,t);i.cgPiece=r,i.cgKey=A,K&&(i.cgAnimating=!0,s[0]+=K[2],s[1]+=K[3]),h(i,p(s,o,e.dimensions)),e.addPieceZIndex&&(i.style.zIndex=l(s,o)),f.appendChild(i)}for(const n in C)c(e,C[n]);for(const n in M)c(e,M[n])}},{"./board":3,"./util":18}],15:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./fen"),r=e("./util");o.defaults=function(){return{pieces:n.read(n.initial,0),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,centerPiece:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:r.timer(),dimensions:{width:8,height:8},geometry:0,variant:"chess",notation:0}}},{"./fen":11,"./util":18}],16:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util");function r(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function i({orig:e,dest:t,brush:o,piece:n,modifiers:r},i,a){return[a,e,t,o,t&&i[t]>1,n&&s(n),r&&(c=r,""+(c.lineWidth||""))].filter(e=>e).join("");var c}function s(e){return[e.color,e.role,e.scale].filter(e=>e).join("")}function a(e){const t=c(r("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(c(r("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function c(e,t){for(let o in t)e.setAttribute(o,t[o]);return e}function l(e,t,o){return"white"===t?e:[o.width+1-e[0],o.height+1-e[1]]}function d(e,t){const o={color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth)};return o.key=[e.key,t.lineWidth].filter(e=>e).join(""),o}function u(e,t,o,n){return(e.lineWidth||10)*(t?.85:1)/(64*n.width)*o.width}function p(e,t){return(e.opacity||1)*(t?.9:1)}function h(e,t,o){return[(e[0]-.5)*t.width/o.width,(o.height+.5-e[1])*t.height/o.height]}o.createElement=r,o.renderSvg=function(e,t){const o=e.drawable,s=o.current,f=s&&s.mouseSq?s:void 0,g={};o.shapes.concat(o.autoShapes).concat(f?[f]:[]).forEach(e=>{e.dest&&(g[e.dest]=(g[e.dest]||0)+1)});const m=o.shapes.concat(o.autoShapes).map(e=>({shape:e,current:!1,hash:i(e,g,!1)}));f&&m.push({shape:f,current:!0,hash:i(f,g,!0)});const b=m.map(e=>e.hash).join("");if(b===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=b;const v=t.firstChild;!function(e,t,o){const n={};let r;t.forEach(t=>{t.shape.dest&&(r=e.brushes[t.shape.brush],t.shape.modifiers&&(r=d(r,t.shape.modifiers)),n[r.key]=r)});const i={};let s=o.firstChild;for(;s;)i[s.getAttribute("cgKey")]=!0,s=s.nextSibling;for(let c in n)i[c]||o.appendChild(a(n[c]))}(o,m,v),function(e,t,o,i,s,a){const f=e.dom.bounds(),g={},m=[];t.forEach(e=>{g[e.hash]=!1});let b,v=a.nextSibling;for(;v;)b=v.getAttribute("cgHash"),g.hasOwnProperty(b)?g[b]=!0:m.push(v),v=v.nextSibling;m.forEach(e=>s.removeChild(e)),t.forEach(t=>{g[t.hash]||s.appendChild(function(e,{shape:t,current:o,hash:i},s,a,f){const g=10===e.dimensions.height;let m;if(t.piece)m=function(e,t,o,n,i){const s=h(t,n,i),a=n.width/i.width*(o.scale||1),l=n.width/i.height*(o.scale||1),d=o.color[0]+("knight"===o.role?"n":o.role[0]).toUpperCase();return c(r("image"),{className:`${o.role} ${o.color}`,x:s[0]-a/2,y:s[1]-l/2,width:a,height:l,href:e+d+".svg"})}(e.drawable.pieces.baseUrl,l(n.key2pos(t.orig,g),e.orientation,e.dimensions),t.piece,f,e.dimensions);else{const i=l(n.key2pos(t.orig,g),e.orientation,e.dimensions);if(t.orig&&t.dest){let b=s[t.brush];t.modifiers&&(b=d(b,t.modifiers)),m=function(e,t,o,n,i,s,a){const l=function(e,t,o){return(t?20:10)/(64*o.width)*e.width}(s,i&&!n,a),d=h(t,s,a),f=h(o,s,a),g=f[0]-d[0],m=f[1]-d[1],b=Math.atan2(m,g),v=Math.cos(b)*l,w=Math.sin(b)*l;return c(r("line"),{stroke:e.color,"stroke-width":u(e,n,s,a),"stroke-linecap":"round","marker-end":"url(#arrowhead-"+e.key+")",opacity:p(e,n),x1:d[0],y1:d[1],x2:f[0]-v,y2:f[1]-w})}(b,i,l(n.key2pos(t.dest,g),e.orientation,e.dimensions),o,a[t.dest]>1,f,e.dimensions)}else m=function(e,t,o,n,i){const s=h(t,n,i),a=function(e,t){const o=e.width/(64*t.width);return[3*o,4*o]}(n,i),l=n.width/i.width/2;return c(r("circle"),{stroke:e.color,"stroke-width":a[o?0:1],fill:"none",opacity:p(e,o),cx:s[0],cy:s[1],r:l-a[1]/2})}(s[t.brush],i,o,f,e.dimensions)}return m.setAttribute("cgHash",i),m}(e,t,o,i,f))})}(e,m,o.brushes,g,t,v)}},{"./util":18}],17:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.files=["a","b","c","d","e","f","g","h","i","j"],o.ranks=["0","1","2","3","4","5","6","7","8","9","10"],o.dimensions=[{width:8,height:8},{width:9,height:9},{width:10,height:8},{width:9,height:10},{width:10,height:10},{width:5,height:5},{width:7,height:7}]},{}],18:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./types");o.colors=["white","black"],o.NRanks=[1,2,3,4,5,6,7,8,9,10],o.invNRanks=[10,9,8,7,6,5,4,3,2,1];const r=n.files.slice(0,5),i=n.files.slice(0,7),s=n.files.slice(0,8),a=n.files.slice(0,9),c=n.files.slice(0,10),l=n.ranks.slice(1,6),d=n.ranks.slice(1,8),u=n.ranks.slice(1,9),p=n.ranks.slice(1,10),h=n.ranks.slice(0,10),f=Array.prototype.concat(...r.map(e=>l.map(t=>e+t))),g=Array.prototype.concat(...i.map(e=>d.map(t=>e+t))),m=Array.prototype.concat(...s.map(e=>u.map(t=>e+t))),b=Array.prototype.concat(...a.map(e=>p.map(t=>e+t))),v=Array.prototype.concat(...c.map(e=>u.map(t=>e+t))),w=Array.prototype.concat(...a.map(e=>h.map(t=>e+t))),y=Array.prototype.concat(...c.map(e=>h.map(t=>e+t)));o.allKeys=[m,b,v,w,y,f,g],o.pos2key=function(e,t){const r=n.dimensions[t];return o.allKeys[t][r.height*e[0]+e[1]-r.height-1]},o.key2pos=function(e,t){const o=t?1:0;return[e.charCodeAt(0)-96,e.charCodeAt(1)-48+o]},o.memo=function(e){let t;const o=()=>(void 0===t&&(t=e()),t);return o.clear=()=>{t=void 0},o},o.timer=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},o.opposite=e=>"white"===e?"black":"white",o.containsX=function(e,t){return void 0!==e&&-1!==e.indexOf(t)},o.distanceSq=(e,t)=>Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2),o.samePiece=(e,t)=>e.role===t.role&&e.color===t.color;const k=(e,t,o,n,r)=>[(t?e[0]-1:r.width-e[0])*o,(t?r.height-e[1]:e[1]-1)*n];o.posToTranslateAbs=(e,t)=>{const o=e.width/t.width,n=e.height/t.height;return(e,r)=>k(e,r,o,n,t)},o.posToTranslateRel=(e,t,o)=>k(e,t,100/o.width,100/o.height,o),o.translateAbs=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},o.translateRel=(e,t)=>{e.style.transform=`translate(${t[0]}%,${t[1]}%)`},o.setVisible=(e,t)=>{e.style.visibility=t?"visible":"hidden"},o.eventPosition=e=>e.clientX||0===e.clientX?[e.clientX,e.clientY]:e.touches&&e.targetTouches[0]?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0,o.isRightButton=e=>2===e.buttons||2===e.button,o.createEl=(e,t)=>{const o=document.createElement(e);return t&&(o.className=t),o}},{"./types":17}],19:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util"),r=e("./types"),i=e("./svg");function s(e,t){const o=n.createEl("coords",t);let r;for(let i in e)r=n.createEl("coord"),r.textContent=e[i],o.appendChild(r);return o}o.default=function(e,t,o){e.innerHTML="",e.classList.add("cg-wrap"),n.colors.forEach(o=>e.classList.toggle("orientation-"+o,t.orientation===o)),e.classList.toggle("manipulable",!t.viewOnly);const a=n.createEl("cg-helper");e.appendChild(a);const c=n.createEl("cg-container");a.appendChild(c);const l=n.createEl("extension");c.appendChild(l);const d=n.createEl("cg-board");let u,p;if(c.appendChild(d),t.drawable.visible&&!o&&(u=i.createElement("svg"),u.appendChild(i.createElement("defs")),c.appendChild(u)),t.coordinates){const e="black"===t.orientation?" black":"";1===t.geometry||5===t.geometry?(c.appendChild(s(r.files.slice(0,t.dimensions.height).reverse(),"files"+e)),c.appendChild(s(r.ranks.slice(1,t.dimensions.width+1).reverse(),"ranks"+e))):5===t.notation?(c.appendChild(s(["0"].concat(r.ranks.slice(1,10).reverse()),"ranks"+e)),c.appendChild(s(r.ranks.slice(1,10),"files"+e))):(c.appendChild(s(r.ranks.slice(1,t.dimensions.height+1),"ranks"+e)),c.appendChild(s(r.files.slice(0,t.dimensions.width),"files"+e)))}return t.draggable.showGhost&&!o&&(p=n.createEl("piece","ghost"),n.setVisible(p,!1),c.appendChild(p)),{board:d,container:c,ghost:p,svg:u}}},{"./svg":16,"./types":17,"./util":18}]},{},[12])(12)}));