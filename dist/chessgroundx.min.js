!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chessground=e()}}((function(){return function e(t,o,n){function r(s,a){if(!o[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[s]={exports:{}};t[s][0].call(d.exports,(function(e){return r(t[s][1][e]||e)}),d,d.exports,e,t,o,n)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.render=o.anim=void 0;const n=e("./util");function r(e,t){const o=e(t);return t.dom.redraw(),o}function i(e,t){return{key:e,pos:n.key2pos(e),piece:t}}function s(e,t){const o=e.animation.current;if(void 0===o)return void(e.dom.destroyed||e.dom.redrawNow());const n=1-(t-o.start)*o.frequency;if(n<=0)e.animation.current=void 0,e.dom.redrawNow();else{const t=(r=n)<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1;for(let e in o.plan.anims){const n=o.plan.anims[e];n[2]=n[0]*t,n[3]=n[1]*t}e.dom.redrawNow(!0),requestAnimationFrame(((t=performance.now())=>s(e,t)))}var r}function a(e){for(let t in e)return!1;return!0}o.anim=function(e,t){return t.animation.enabled?function(e,t){const o=Object.assign({},t.pieces),r=e(t),c=function(e,t){const o={},r=[],s={},a=[],c=[],l={};let d,u,p,h;for(p in e)l[p]=i(p,e[p]);for(const f of n.allKeys(t.geometry))d=t.pieces[f],u=l[f],d?u?n.samePiece(d,u.piece)||(a.push(u),c.push(i(f,d))):c.push(i(f,d)):u&&a.push(u);return c.forEach((e=>{var t,i;t=e,i=a.filter((t=>n.samePiece(e.piece,t.piece))),u=i.sort(((e,o)=>n.distanceSq(t.pos,e.pos)-n.distanceSq(t.pos,o.pos)))[0],u&&(h=[u.pos[0]-e.pos[0],u.pos[1]-e.pos[1]],o[e.key]=h.concat(h),r.push(u.key))})),a.forEach((e=>{n.containsX(r,e.key)||(s[e.key]=e.piece)})),{anims:o,fadings:s}}(o,t);if(a(c.anims)&&a(c.fadings))t.dom.redraw();else{const e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:c},e||s(t,performance.now())}return r}(e,t):r(e,t)},o.render=r},{"./util":18}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.start=void 0;const n=e("./board"),r=e("./fen"),i=e("./config"),s=e("./anim"),a=e("./drag"),c=e("./explosion");o.start=function(e,t){function o(){n.toggleOrientation(e),t()}return{set(t){t.orientation&&t.orientation!==e.orientation&&o(),(t.fen?s.anim:s.render)((e=>i.configure(e,t)),e)},state:e,getFen:()=>r.write(e.pieces,e.geometry),toggleOrientation:o,setPieces(t){s.anim((e=>n.setPieces(e,t)),e)},selectSquare(t,o){t?s.anim((e=>n.selectSquare(e,t,o)),e):e.selected&&(n.unselect(e),e.dom.redraw())},move(t,o){s.anim((e=>n.baseMove(e,t,o)),e)},newPiece(t,o){s.anim((e=>n.baseNewPiece(e,t,o)),e)},playPremove(){if(e.premovable.current){if(s.anim(n.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){const o=n.playPredrop(e,t);return e.dom.redraw(),o}return!1},cancelPremove(){s.render(n.unsetPremove,e)},cancelPredrop(){s.render(n.unsetPredrop,e)},cancelMove(){s.render((e=>{n.cancelMove(e),a.cancel(e)}),e)},stop(){s.render((e=>{n.stop(e),a.cancel(e)}),e)},explode(t){c.default(e,t)},setAutoShapes(t){s.render((e=>e.drawable.autoShapes=t),e)},setShapes(t){s.render((e=>e.drawable.shapes=t),e)},getKeyAtDomPos:t=>n.getKeyAtDomPos(t,n.whitePov(e),e.dom.bounds(),e.geometry),redrawAll:t,dragNewPiece(t,o,n){a.dragNewPiece(e,t,o,n)},destroy(){n.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},{"./anim":1,"./board":3,"./config":5,"./drag":6,"./explosion":10,"./fen":11}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.whitePov=o.getKeyAtDomPos=o.stop=o.cancelMove=o.playPredrop=o.playPremove=o.isDraggable=o.canMove=o.unselect=o.setSelected=o.selectSquare=o.dropNewPiece=o.userMove=o.baseNewPiece=o.baseMove=o.unsetPredrop=o.unsetPremove=o.setCheck=o.setPieces=o.reset=o.toggleOrientation=o.callUserFunction=void 0;const n=e("./util"),r=e("./premove"),i=e("./types");function s(e,...t){e&&setTimeout((()=>e(...t)),1)}function a(e){e.premovable.current&&(e.premovable.current=void 0,s(e.premovable.events.unset))}function c(e){const t=e.predroppable;t.current&&(t.current=void 0,s(t.events.unset))}function l(e,t,o){const r=e.pieces[t],i=e.pieces[o];if(t===o||!r)return!1;const a=i&&i.color!==r.color?i:void 0;return o==e.selected&&f(e),s(e.events.move,t,o,a),function(e,t,o){if(!e.autoCastle)return!1;const r=e.pieces[t];if(!r||"king"!==r.role)return!1;const i=n.key2pos(t);if(5!==i[0])return!1;if(1!==i[1]&&8!==i[1])return!1;const s=n.key2pos(o);let a,c,l;if(7===s[0]||8===s[0])a=n.pos2key([8,i[1]]),c=n.pos2key([6,i[1]]),l=n.pos2key([7,i[1]]);else{if(3!==s[0]&&1!==s[0])return!1;a=n.pos2key([1,i[1]]),c=n.pos2key([4,i[1]]),l=n.pos2key([3,i[1]])}const d=e.pieces[a];return!(!d||"rook"!==d.role||(delete e.pieces[t],delete e.pieces[a],e.pieces[l]=r,e.pieces[c]=d,0))}(e,t,o)||(e.pieces[o]=r,delete e.pieces[t]),e.lastMove=[t,o],e.check=void 0,s(e.events.change),a||!0}function d(e,t,o,r){if(e.pieces[o]){if(!r)return!1;delete e.pieces[o]}return s(e.events.dropNewPiece,t,o),e.pieces[o]=t,e.lastMove=[o],e.check=void 0,s(e.events.change),e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),!0}function u(e,t,o){const r=l(e,t,o);return r&&(e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),e.animation.current=void 0),r}function p(e,t,o){if(m(e,t,o)){const n=u(e,t,o);if(n){const r=e.hold.stop();f(e);const i={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:r};return!0!==n&&(i.captured=n),s(e.movable.events.after,t,o,i),!0}}else if(function(e,t,o){return t!==o&&b(e,t)&&n.containsX(r.default(e.pieces,t,e.premovable.castle,e.geometry,e.variant),o)}(e,t,o))return function(e,t,o,n){c(e),e.premovable.current=[t,o],s(e.premovable.events.set,t,o,n)}(e,t,o,{ctrlKey:e.stats.ctrlKey}),f(e),!0;return f(e),!1}function h(e,t){e.selected=t,b(e,t)?e.premovable.dests=r.default(e.pieces,t,e.premovable.castle,e.geometry,e.variant):e.premovable.dests=void 0}function f(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function g(e,t){const o=e.pieces[t];return!!o&&("both"===e.movable.color||e.movable.color===o.color&&e.turnColor===o.color)}function m(e,t,o){return t!==o&&g(e,t)&&(e.movable.free||!!e.movable.dests&&n.containsX(e.movable.dests[t],o))}function b(e,t){const o=e.pieces[t];return!!o&&e.premovable.enabled&&e.movable.color===o.color&&e.turnColor!==o.color}function v(e){a(e),c(e),f(e)}o.callUserFunction=s,o.toggleOrientation=function(e){e.orientation=n.opposite(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0},o.reset=function(e){e.lastMove=void 0,f(e),a(e),c(e)},o.setPieces=function(e,t){for(let o in t){const n=t[o];n?e.pieces[o]=n:delete e.pieces[o]}},o.setCheck=function(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t)for(let o in e.pieces)"king"===e.pieces[o].role&&e.pieces[o].color===t&&(e.check=o)},o.unsetPremove=a,o.unsetPredrop=c,o.baseMove=l,o.baseNewPiece=d,o.userMove=p,o.dropNewPiece=function(e,t,o,n){if(function(e,t,o){const n=e.pieces[t];return!!n&&o&&(t===o||!e.pieces[o])&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}(e,t,o)||n){const r=e.pieces[t];delete e.pieces[t],d(e,r,o,n),s(e.movable.events.afterNewPiece,r.role,o,{predrop:!1})}else!function(e,t,o){const n=e.pieces[t],r=e.pieces[o];return!!n&&o&&(!r||r.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==n.role||"1"!==o[1]&&"8"!==o[1])&&e.movable.color===n.color&&e.turnColor!==n.color}(e,t,o)?(a(e),c(e)):function(e,t,o){a(e),e.predroppable.current={role:t,key:o},s(e.predroppable.events.set,t,o)}(e,e.pieces[t].role,o);delete e.pieces[t],f(e)},o.selectSquare=function(e,t,o){if(s(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled)return f(e),void e.hold.cancel();if((e.selectable.enabled||o)&&e.selected!==t&&p(e,e.selected,t))return void(e.stats.dragged=!1)}(g(e,t)||b(e,t))&&(h(e,t),e.hold.start())},o.setSelected=h,o.unselect=f,o.canMove=m,o.isDraggable=function(e,t){const o=e.pieces[t];return!!o&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===o.color&&(e.turnColor===o.color||e.premovable.enabled))},o.playPremove=function(e){const t=e.premovable.current;if(!t)return!1;const o=t[0],n=t[1];let r=!1;if(m(e,o,n)){const t=u(e,o,n);if(t){const i={premove:!0};!0!==t&&(i.captured=t),s(e.movable.events.after,o,n,i),r=!0}}return a(e),r},o.playPredrop=function(e,t){let o=e.predroppable.current,n=!1;if(!o)return!1;if(t(o)){d(e,{role:o.role,color:e.movable.color},o.key)&&(s(e.movable.events.afterNewPiece,o.role,o.key,{predrop:!0}),n=!0)}return c(e),n},o.cancelMove=v,o.stop=function(e){e.movable.color=e.movable.dests=e.animation.current=void 0,v(e)},o.getKeyAtDomPos=function(e,t,o,r){const s=i.dimensions[r];let a=Math.ceil(s.width*((e[0]-o.left)/o.width));t||(a=s.width+1-a);let c=Math.ceil(s.height-s.height*((e[1]-o.top)/o.height));return t||(c=s.height+1-c),a>0&&a<s.width+1&&c>0&&c<s.height+1?n.pos2key([a,c]):void 0},o.whitePov=function(e){return"white"===e.orientation}},{"./premove":13,"./types":17,"./util":18}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Chessground=void 0;const n=e("./api"),r=e("./config"),i=e("./state"),s=e("./wrap"),a=e("./events"),c=e("./render"),l=e("./svg"),d=e("./util");function u(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame((()=>{e(),t=!1})))}}o.Chessground=function(e,t){const o=i.defaults();function p(){let t=o.dom&&o.dom.unbind;const n=o.viewOnly&&!o.drawable.visible,r=s.default(e,o,n),i=d.memo((()=>r.board.getBoundingClientRect())),h=e=>{c.default(o),!e&&r.svg&&l.renderSvg(o,r.svg)};o.dom={elements:r,bounds:i,redraw:u(h),redrawNow:h,unbind:t,relative:n},o.drawable.prevSvgHash="",h(!1),a.bindBoard(o),t||(o.dom.unbind=a.bindDocument(o,p)),o.events.insert&&o.events.insert(r)}return r.configure(o,t||{}),p(),n.start(o,p)}},{"./api":2,"./config":5,"./events":9,"./render":14,"./state":15,"./svg":16,"./util":18,"./wrap":19}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.configure=void 0;const n=e("./board"),r=e("./fen"),i=e("./types");function s(e,t){for(let o in t)a(e[o])&&a(t[o])?s(e[o],t[o]):e[o]=t[o]}function a(e){return"object"==typeof e}o.configure=function(e,t){if(t.movable&&t.movable.dests&&(e.movable.dests=void 0),s(e,t),t.geometry&&(e.dimensions=i.dimensions[t.geometry]),t.fen){const o=r.read(t.fen,e.geometry);void 0!==e.pieces.z0&&(o.z0=e.pieces.z0),e.pieces=o,e.drawable.shapes=[]}if(t.hasOwnProperty("check")&&n.setCheck(e,t.check||!1),t.hasOwnProperty("lastMove")&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&n.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){const t="white"===e.movable.color?1:8,o="e"+t,n=e.movable.dests[o],r=e.pieces[o];if(!n||!r||"king"!==r.role)return;e.movable.dests[o]=n.filter((e=>!(e==="a"+t&&-1!==n.indexOf("c"+t)||e==="h"+t&&-1!==n.indexOf("g"+t))))}}},{"./board":3,"./fen":11,"./types":17}],6:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.cancel=o.end=o.move=o.dragNewPiece=o.pieceCloseTo=o.start=void 0;const n=e("./board"),r=e("./util"),i=e("./draw"),s=e("./anim");function a(e,t){const o=n.whitePov(e),i=e.dom.bounds(),s=Math.pow(i.width/8,2);for(let n in e.pieces){const a=u(n,o,i,e.dimensions),c=[a.left+a.width/2,a.top+a.height/2];if(r.distanceSq(c,t)<=s)return!0}return!1}function c(e){requestAnimationFrame((()=>{const t=e.draggable.current;if(!t)return;e.animation.current&&e.animation.current.plan.anims[t.orig]&&(e.animation.current=void 0);const o=e.pieces[t.orig];if(o&&r.samePiece(o,t.piece)){if(!t.started&&r.distanceSq(t.epos,t.rel)>=Math.pow(e.draggable.distance,2)&&(t.started=!0),t.started){if("function"==typeof t.element){const e=t.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),t.element=e}t.pos=[t.epos[0]-t.rel[0],t.epos[1]-t.rel[1]];const o=r.posToTranslateAbs(e.dom.bounds(),e.dimensions)(t.origPos,n.whitePov(e));o[0]+=t.pos[0]+t.dec[0],o[1]+=t.pos[1]+t.dec[1],r.translateAbs(t.element,o)}}else l(e);c(e)}))}function l(e){const t=e.draggable.current;t&&(t.newPiece&&delete e.pieces[t.orig],e.draggable.current=void 0,n.unselect(e),d(e),e.dom.redraw())}function d(e){const t=e.dom.elements;t.ghost&&r.setVisible(t.ghost,!1)}function u(e,t,o,n){const i=r.key2pos(e);return t||(i[0]=n.width+1-i[0],i[1]=n.height+1-i[1]),{left:o.left+o.width*(i[0]-1)/n.width,top:o.top+o.height*(n.height-i[1])/n.height,width:o.width/n.width,height:o.height/n.height}}function p(e,t){let o=e.dom.elements.board.firstChild;for(;o;){if(o.cgKey===t&&"PIECE"===o.tagName)return o;o=o.nextSibling}}o.start=function(e,t){if(void 0!==t.button&&0!==t.button)return;if(t.touches&&t.touches.length>1)return;const o=e.dom.bounds(),l=r.eventPosition(t),d=n.getKeyAtDomPos(l,n.whitePov(e),o,e.geometry);if(!d)return;const h=e.pieces[d],f=e.selected;f||!e.drawable.enabled||!e.drawable.eraseOnClick&&h&&h.color===e.turnColor||i.clear(e),!1===t.cancelable||t.touches&&e.movable.color&&!h&&!f&&!a(e,l)||t.preventDefault();const g=!!e.premovable.current,m=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&n.canMove(e,e.selected,d)?s.anim((e=>n.selectSquare(e,d)),e):n.selectSquare(e,d);const b=e.selected===d,v=p(e,d);if(h&&v&&b&&n.isDraggable(e,d)){const i=u(d,n.whitePov(e),o,e.dimensions);e.draggable.current={orig:d,origPos:r.key2pos(d),piece:h,rel:l,epos:l,pos:[0,0],dec:e.draggable.centerPiece?[l[0]-(i.left+i.width/2),l[1]-(i.top+i.height/2)]:[0,0],started:e.draggable.autoDistance&&e.stats.dragged,element:v,previouslySelected:f,originTarget:t.target},v.cgDragging=!0,v.classList.add("dragging");const s=e.dom.elements.ghost;s&&(s.className=`ghost ${h.color} ${h.role}`,r.translateAbs(s,r.posToTranslateAbs(o,e.dimensions)(r.key2pos(d),n.whitePov(e))),r.setVisible(s,!0)),c(e)}else g&&n.unsetPremove(e),m&&n.unsetPredrop(e);e.dom.redraw()},o.pieceCloseTo=a,o.dragNewPiece=function(e,t,o,i){const s="a0";e.pieces.a0=t,e.dom.redraw();const a=r.eventPosition(o),l=n.whitePov(e),d=e.dom.bounds(),h=u(s,l,d,e.dimensions),f=[(l?0:e.dimensions.width-1)*h.width+d.left,(l?e.dimensions.height:-1)*h.height+d.top];e.draggable.current={orig:s,origPos:r.key2pos("a0"),piece:t,rel:f,epos:a,pos:[a[0]-f[0],a[1]-f[1]],dec:[-h.width/2,-h.height/2],started:!0,element:()=>p(e,s),originTarget:o.target,newPiece:!0,force:!!i},c(e)},o.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.epos=r.eventPosition(t))},o.end=function(e,t){const o=e.draggable.current;if(!o)return;if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&o&&o.originTarget!==t.target&&!o.newPiece)return void(e.draggable.current=void 0);n.unsetPremove(e),n.unsetPredrop(e);const i=r.eventPosition(t)||o.epos,s=n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds(),e.geometry);s&&o.started&&o.orig!==s?o.newPiece?n.dropNewPiece(e,o.orig,s,o.force):(e.stats.ctrlKey=t.ctrlKey,n.userMove(e,o.orig,s)&&(e.stats.dragged=!0)):o.newPiece?delete e.pieces[o.orig]:e.draggable.deleteOnDropOff&&!s&&(delete e.pieces[o.orig],n.callUserFunction(e.events.change)),(!o||o.orig!==o.previouslySelected||o.orig!==s&&s)&&e.selectable.enabled||n.unselect(e),d(e),e.draggable.current=void 0,e.dom.redraw()},o.cancel=l},{"./anim":1,"./board":3,"./draw":7,"./util":18}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.clear=o.cancel=o.end=o.move=o.processDraw=o.start=void 0;const n=e("./board"),r=e("./util"),i=["green","red","blue","yellow"];function s(e){requestAnimationFrame((()=>{const t=e.drawable.current;if(t){const o=n.getKeyAtDomPos(t.pos,n.whitePov(e),e.dom.bounds(),e.geometry);o!==t.mouseSq&&(t.mouseSq=o,t.dest=o!==t.orig?o:void 0,e.dom.redrawNow()),s(e)}}))}function a(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function c(e){return i[((e.shiftKey||e.ctrlKey)&&r.isRightButton(e)?1:0)+(e.altKey?2:0)]}function l(e){e.onChange&&e.onChange(e.shapes)}o.start=function(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?n.unselect(e):n.cancelMove(e);const o=r.eventPosition(t),i=n.getKeyAtDomPos(o,n.whitePov(e),e.dom.bounds(),e.geometry);i&&(e.drawable.current={orig:i,pos:o,brush:c(t)},s(e))},o.processDraw=s,o.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=r.eventPosition(t))},o.end=function(e){const t=e.drawable.current;t&&(t.mouseSq&&function(e,t){const o=e=>e.orig===t.orig&&e.dest===t.dest,n=e.shapes.filter(o)[0];n&&(e.shapes=e.shapes.filter((e=>!o(e))));n&&n.brush===t.brush||e.shapes.push(t);l(e)}(e.drawable,t),a(e))},o.cancel=a,o.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),l(e.drawable))}},{"./board":3,"./util":18}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.drop=o.cancelDropMode=o.setDropMode=void 0;const n=e("./board"),r=e("./util"),i=e("./drag");o.setDropMode=function(e,t){e.dropmode={active:!0,piece:t},i.cancel(e)},o.cancelDropMode=function(e){e.dropmode={active:!1}},o.drop=function(e,t){if(!e.dropmode.active)return;n.unsetPremove(e),n.unsetPredrop(e);const o=e.dropmode.piece;if(o){e.pieces.z0=o;const i=r.eventPosition(t),s=i&&n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds(),e.geometry);s&&n.dropNewPiece(e,"a0",s)}e.dom.redraw()}},{"./board":3,"./drag":6,"./util":18}],9:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.bindDocument=o.bindBoard=void 0;const n=e("./drag"),r=e("./draw"),i=e("./drop"),s=e("./util");function a(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o)}function c(e,t,o){return n=>{n.shiftKey||s.isRightButton(n)?e.drawable.enabled&&o(e,n):e.viewOnly||t(e,n)}}o.bindBoard=function(e){if(e.viewOnly)return;const t=e.dom.elements.board,o=function(e){return t=>{e.draggable.current?n.cancel(e):e.drawable.current?r.cancel(e):t.shiftKey||s.isRightButton(t)?e.drawable.enabled&&r.start(e,t):e.viewOnly||(e.dropmode.active?i.drop(e,t):n.start(e,t))}}(e);t.addEventListener("touchstart",o,{passive:!1}),t.addEventListener("mousedown",o,{passive:!1}),(e.disableContextMenu||e.drawable.enabled)&&t.addEventListener("contextmenu",(e=>e.preventDefault()))},o.bindDocument=function(e,t){const o=[];if(!e.dom.relative&&e.resizable){const n=()=>{e.dom.bounds.clear(),requestAnimationFrame(t)};o.push(a(document.body,"chessground.resize",n))}if(!e.viewOnly){const t=c(e,n.move,r.move),i=c(e,n.end,r.end);["touchmove","mousemove"].forEach((e=>o.push(a(document,e,t)))),["touchend","mouseup"].forEach((e=>o.push(a(document,e,i))));const s=()=>e.dom.bounds.clear();o.push(a(window,"scroll",s,{passive:!0})),o.push(a(window,"resize",s,{passive:!0}))}return()=>o.forEach((e=>e()))}},{"./drag":6,"./draw":7,"./drop":8,"./util":18}],10:[function(e,t,o){"use strict";function n(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout((()=>{n(e,2),setTimeout((()=>n(e,void 0)),120)}),120)}},{}],11:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.write=o.read=o.initial=void 0;const n=e("./util"),r=e("./types");o.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";const i={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king",m:"met",f:"ferz",s:"silver",c:"chancellor",a:"archbishop",h:"hawk",e:"elephant",y:"yurt",l:"lancer",u:"unicorn",d:"dragon",o:"cannon"},s={p:"pawn",r:"rook",n:"knight",b:"bishop",k:"king",g:"gold",s:"silver",l:"lance"},a={c:"chancellor",e:"elephant",l:"king",g:"gold",h:"hawk"},c={p:"pawn",r:"rook",n:"knight",b:"bishop",k:"king",c:"cannon",a:"advisor",m:"banner"},l={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k",met:"m",ferz:"f",silver:"s",chancellor:"c",archbishop:"a",hawk:"h",elephant:"e",ppawn:"+p",pknight:"+n",pbishop:"+b",prook:"+r",pferz:"+f",yurt:"y",lancer:"l",unicorn:"u",dragon:"d",cannon:"o"},d={pawn:"p",rook:"r",knight:"n",bishop:"b",king:"k",gold:"g",silver:"s",lance:"l",ppawn:"+p",pknight:"+n",pbishop:"+b",prook:"+r",psilver:"+s",plance:"+l"},u={chancellor:"c",elephant:"e",king:"l",gold:"g",hawk:"h",pchancellor:"+c"},p={pawn:"p",rook:"r",knight:"n",bishop:"b",king:"k",cannon:"c",advisor:"a",banner:"m"};o.read=function(e,t){"start"===e&&(e=o.initial),-1!==e.indexOf("[")&&(e=e.slice(0,e.indexOf("[")));const r={};let l=e.split("/").length,d=0,u=!1,p=i;switch(t){case 3:case 6:p=c;break;case 1:case 8:case 5:p=s;break;case 7:p=a}for(const o of e)switch(o){case" ":return r;case"/":if(--l,0===l)return r;d=0;break;case"+":u=!0;break;case"~":const e=r[n.pos2key([d,l])];e&&(e.promoted=!0,"met"==e.role&&(e.role="ferz"));break;default:const t=o.charCodeAt(0);if(t<58)d+="0"===o?9:t-48;else{++d;const e=o.toLowerCase();let t={role:p[e],color:o===e?"black":"white"};u&&(t.role="p"+t.role,t.promoted=!0,u=!1),r[n.pos2key([d,l])]=t}}return r},o.write=function(e,t){var o={};switch(t){case 6:case 3:o=p;break;case 7:o=u;break;case 5:case 8:case 1:o=d;break;default:o=l}const i=r.dimensions[t];return n.invNRanks.slice(-i.height).map((t=>n.NRanks.slice(0,i.width).map((r=>{const i=e[n.pos2key([r,t])];if(i){const e=o[i.role]+(i.promoted&&"+"!==o[i.role].charAt(0)?"~":"");return"white"===i.color?e.toUpperCase():e}return"1"})).join(""))).join("/").replace(/1{2,}/g,(e=>e.length.toString()))}},{"./types":17,"./util":18}],12:[function(e,t,o){t.exports=e("./chessground").Chessground},{"./chessground":4}],13:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util"),r=[[4,10],[5,10],[6,10],[4,9],[5,9],[6,9],[4,8],[5,8],[6,8]],i=[[4,3],[5,3],[6,3],[4,2],[5,2],[6,2],[4,1],[5,1],[6,1]],s=[[3,7],[4,7],[5,7],[3,6],[4,6],[5,6],[3,5],[4,5],[5,5]],a=[[3,3],[4,3],[5,3],[3,2],[4,2],[5,2],[3,1],[4,1],[5,1]];function c(e,t){return Math.abs(e-t)}const l=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return 1===r&&2===i||2===r&&1===i},d=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return 1===r&&0===i||0===r&&1===i},u=(e,t,o,n)=>c(e,o)===c(t,n),p=(e,t,o,n)=>e===o||t===n,h=(e,t,o,n)=>u(e,t,o,n)||p(e,t,o,n),f=(e,t,o,n)=>l(e,t,o,n)||p(e,t,o,n),g=(e,t,o,n)=>l(e,t,o,n)||u(e,t,o,n);const m=(e,t,o,n)=>c(e,o)===c(t,n)&&1===c(e,o),b=(e,t,o,n)=>u(e,t,o,n)||l(e,t,o,n),v=(e,t,o,n)=>p(e,t,o,n)||l(e,t,o,n),w=(e,t,o,n)=>O(e,t,o,n)||l(e,t,o,n);function k(e){return(t,o,n,r)=>m(t,o,n,r)||t===n&&("white"===e?r===o+1:r===o-1)}function y(e){return(t,o,n,r)=>c(t,n)<2&&c(o,r)<2&&("white"===e?!(n===t-1&&r===o-1||n===t+1&&r===o-1):!(n===t+1&&r===o+1||n===t-1&&r===o+1))}function P(e){return(t,o,n,r)=>n===t&&("white"===e?r===o+1:r===o-1)}const M=(e,t,o,n)=>p(e,t,o,n)||c(e,o)<2&&c(t,n)<2,C=(e,t,o,n)=>u(e,t,o,n)||c(e,o)<2&&c(t,n)<2,O=(e,t,o,n)=>c(e,o)<2&&c(t,n)<2;const x=(e,t,o,n)=>c(e,o)===c(t,n)&&(1===c(e,o)||2===c(e,o)),A=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return 2===r&&3===i||3===r&&2===i};function S(e){return(t,o,n,r)=>n===t&&("white"===e?r===o+1:r===o-1)||r===o&&(n===t+1||n===t-1)}function E(e){const t="white"==e?i:r;return(e,o,n,r)=>c(e,n)<2&&c(o,r)<2&&t.some((e=>e[0]===n&&e[1]===r))}const D=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return!(1!==r&&2!==r||1!==i&&2!==i)},_=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return 0===r&&(2===i||3===i)||0===i&&(2===r||3===r)||r===i&&(2===r||3===r)},K=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return 1===r||1===i||2===r&&(0===i||2===i)||0===r&&2===i},N=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return r<3&&(i<2||2===i&&0===r)},j=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return l(e,t,o,n)||1===r&&3===i||3===r&&1===i},q=(e,t,o,n)=>l(e,t,o,n)||h(e,t,o,n),T=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return r===i&&r<4||0===i&&2===r||2===i&&r<2},R=(e,t,o,n)=>{const r=c(e,o),i=c(t,n);return r<3&&i<3&&!(1===r&&0===i)&&!(0===r&&1===i)};o.default=function(e,t,o,L,z){const F=e[t],B=n.key2pos(t);let W;switch(L){case 6:case 3:switch(F.role){case"pawn":"janggi"===z||6===L?W=S(F.color):(X=F.color,W=(e,t,o,n)=>o===e&&("white"===X?n===t+1:n===t-1)||n===t&&(o===e+1||o===e-1)&&("white"===X?t>5:t<6));break;case"banner":W=f;break;case"cannon":case"rook":W=p;break;case"knight":W=l;break;case"bishop":W="janggi"===z?A:function(e){return(t,o,n,r)=>c(t,n)===c(o,r)&&2===c(t,n)&&("white"===e?r<6:r>5)}(F.color);break;case"advisor":W="janggi"===z?E(F.color):function(e,t){const o="white"==e?6===t?a:i:6===t?s:r;return(e,t,n,r)=>c(e,n)===c(t,r)&&1===c(e,n)&&o.some((e=>e[0]===n&&e[1]===r))}(F.color,L);break;case"king":W="janggi"===z?E(F.color):function(e,t){const o="white"==e?6===t?a:i:6===t?s:r;return(e,t,n,r)=>(e===n&&1===c(t,r)||t===r&&1===c(e,n))&&o.some((e=>e[0]===n&&e[1]===r))}(F.color,L)}break;case 5:case 8:case 1:switch(F.role){case"pawn":W=P(F.color);break;case"knight":W=function(e){return(t,o,n,r)=>"white"===e?r===o+2&&n===t-1||r===o+2&&n===t+1:r===o-2&&n===t-1||r===o-2&&n===t+1}(F.color);break;case"bishop":W=u;break;case"rook":W=p;break;case"king":W=O;break;case"silver":W=k(F.color);break;case"ppawn":case"plance":case"pknight":case"psilver":case"gold":W=y(F.color);break;case"lance":W=function(e){return(t,o,n,r)=>n===t&&("white"===e?r>o:r<o)}(F.color);break;case"prook":W=M;break;case"pbishop":W=C}break;case 7:switch(F.role){case"chancellor":W=P(F.color);break;case"elephant":W=m;break;case"gold":W=d;break;case"king":W=O;break;case"pchancellor":W=y(F.color)}break;default:switch(F.role){case"pawn":W=function(e){return(t,o,n,r)=>c(t,n)<2&&("white"===e?r===o+1||o<=2&&r===o+2&&t===n:r===o-1||o>=7&&r===o-2&&t===n)}(F.color);break;case"knight":W=l;break;case"pknight":W=w;break;case"bishop":W=u;break;case"rook":W=p;break;case"pferz":case"queen":W=h;break;case"ppawn":W=O;break;case"king":W="synochess"===z&&"black"===F.color?O:function(e,t,o){return(r,i,s,a)=>c(r,s)<2&&c(i,a)<2||o&&i===a&&i===("white"===e?1:8)&&(5===r&&(n.containsX(t,1)&&3===s||n.containsX(t,8)&&7===s)||n.containsX(t,s))}(F.color,function(e,t){const o="white"==t?"1":"8";return Object.keys(e).filter((n=>{const r=e[n];return n[1]===o&&r&&r.color===t&&"rook"===r.role})).map((e=>n.key2pos(e)[0]))}(e,F.color),o);break;case"hawk":W="orda"===z?w:"musketeer"===z?_:b;break;case"pbishop":case"archbishop":switch(z){case"orda":W=g;break;case"synochess":W=O;break;default:W=b}break;case"lancer":W="musketeer"===z?D:f;break;case"elephant":W="shako"===z||"synochess"===z?x:"musketeer"===z?K:v;break;case"prook":case"chancellor":W="shako"===z||"synochess"===z?p:v;break;case"met":case"ferz":W="musketeer"===z?T:m;break;case"yurt":case"silver":W="synochess"===z?S(F.color):"musketeer"===z?R:k(F.color);break;case"cannon":W=N;break;case"unicorn":W=j;break;case"dragon":W=q}}var X;return n.allKeys(L).map(n.key2pos).filter((e=>(B[0]!==e[0]||B[1]!==e[1])&&W(B[0],B[1],e[0],e[1]))).map(n.pos2key)}},{"./util":18}],14:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util"),r=e("./board"),i=e("./util");function s(e){return"PIECE"===e.tagName}function a(e){return"SQUARE"===e.tagName}function c(e,t){for(const o in t)e.dom.elements.board.removeChild(t[o])}function l(e,t){let o=2+8*(e[1]-1)+(8-e[0]);return t&&(o=67-o),o+""}function d(e){return`${e.color} ${e.role}`}function u(e,t,o){e[t]?e[t]+=" "+o:e[t]=o}o.default=function(e){const t=r.whitePov(e),o=e.dom.relative?i.posToTranslateRel:i.posToTranslateAbs(e.dom.bounds(),e.dimensions),p=e.dom.relative?i.translateRel:i.translateAbs,h=e.dom.elements.board,f=e.pieces,g=e.animation.current,m=g?g.plan.anims:{},b=g?g.plan.fadings:{},v=e.draggable.current,w=function(e){const t={};let o,n;if(e.lastMove&&e.highlight.lastMove)for(o in e.lastMove)"a0"!=e.lastMove[o]&&u(t,e.lastMove[o],"last-move");e.check&&e.highlight.check&&u(t,e.check,"check");if(e.selected&&("a0"!=e.selected&&u(t,e.selected,"selected"),e.movable.showDests)){const r=e.movable.dests&&e.movable.dests[e.selected];if(r)for(o in r)n=r[o],u(t,n,"move-dest"+(e.pieces[n]?" oc":""));const i=e.premovable.dests;if(i)for(o in i)n=i[o],u(t,n,"premove-dest"+(e.pieces[n]?" oc":""))}const r=e.premovable.current;if(r)for(o in r)u(t,r[o],"current-premove");else e.predroppable.current&&u(t,e.predroppable.current.key,"current-premove");const i=e.exploding;if(i)for(o in i.keys)u(t,i.keys[o],"exploding"+i.stage);return t}(e),k={},y={},P={},M={},C=Object.keys(f);let O,x,A,S,E,D,_,K,N,j,q;for(A=h.firstChild;A;){if(O=A.cgKey,s(A))if(S=f[O],D=m[O],_=b[O],E=A.cgPiece,!A.cgDragging||v&&v.orig===O||(A.classList.remove("dragging"),p(A,o(n.key2pos(O),t,e.dimensions)),A.cgDragging=!1),!_&&A.cgFading&&(A.cgFading=!1,A.classList.remove("fading")),S){if(D&&A.cgAnimating&&E===d(S)){const r=n.key2pos(O);r[0]+=D[2],r[1]+=D[3],A.classList.add("anim"),p(A,o(r,t,e.dimensions))}else A.cgAnimating&&(A.cgAnimating=!1,A.classList.remove("anim"),p(A,o(n.key2pos(O),t,e.dimensions)),e.addPieceZIndex&&(A.style.zIndex=l(n.key2pos(O),t)));E!==d(S)||_&&A.cgFading?_&&E===d(_)?(A.classList.add("fading"),A.cgFading=!0):P[E]?P[E].push(A):P[E]=[A]:k[O]=!0}else P[E]?P[E].push(A):P[E]=[A];else if(a(A)){const e=A.className;w[O]===e?y[O]=!0:M[e]?M[e].push(A):M[e]=[A]}A=A.nextSibling}for(const r in w)if(!y[r]){j=M[w[r]],q=j&&j.pop();const i=o(n.key2pos(r),t,e.dimensions);if(q)q.cgKey=r,p(q,i);else{const e=n.createEl("square",w[r]);e.cgKey=r,p(e,i),h.insertBefore(e,h.firstChild)}}for(const r in C)if(O=C[r],x=f[O],D=m[O],!k[O])if(K=P[d(x)],N=K&&K.pop(),N){N.cgKey=O,N.cgFading&&(N.classList.remove("fading"),N.cgFading=!1);const r=n.key2pos(O);e.addPieceZIndex&&(N.style.zIndex=l(r,t)),D&&(N.cgAnimating=!0,N.classList.add("anim"),r[0]+=D[2],r[1]+=D[3]),p(N,o(r,t,e.dimensions))}else{const r=d(x),i=n.createEl("piece",r),s=n.key2pos(O);i.cgPiece=r,i.cgKey=O,D&&(i.cgAnimating=!0,s[0]+=D[2],s[1]+=D[3]),p(i,o(s,t,e.dimensions)),e.addPieceZIndex&&(i.style.zIndex=l(s,t)),h.appendChild(i)}for(const n in P)c(e,P[n]);for(const n in M)c(e,M[n])}},{"./board":3,"./util":18}],15:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.defaults=void 0;const n=e("./fen"),r=e("./util");o.defaults=function(){return{pieces:n.read(n.initial,0),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,centerPiece:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:r.timer(),dimensions:{width:8,height:8},geometry:0,variant:"chess",notation:0}}},{"./fen":11,"./util":18}],16:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.renderSvg=o.createElement=void 0;const n=e("./util");function r(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function i({orig:e,dest:t,brush:o,piece:n,modifiers:r},i,a){return[a,e,t,o,t&&i[t]>1,n&&s(n),r&&(c=r,""+(c.lineWidth||""))].filter((e=>e)).join("");var c}function s(e){return[e.color,e.role,e.scale].filter((e=>e)).join("")}function a(e){const t=c(r("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(c(r("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function c(e,t){for(let o in t)e.setAttribute(o,t[o]);return e}function l(e,t,o){return"white"===t?e:[o.width+1-e[0],o.height+1-e[1]]}function d(e,t){const o={color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth)};return o.key=[e.key,t.lineWidth].filter((e=>e)).join(""),o}function u(e,t,o,n){return(e.lineWidth||10)*(t?.85:1)/(64*n.width)*o.width}function p(e,t){return(e.opacity||1)*(t?.9:1)}function h(e,t,o){return[(e[0]-.5)*t.width/o.width,(o.height+.5-e[1])*t.height/o.height]}o.createElement=r,o.renderSvg=function(e,t){const o=e.drawable,s=o.current,f=s&&s.mouseSq?s:void 0,g={};o.shapes.concat(o.autoShapes).concat(f?[f]:[]).forEach((e=>{e.dest&&(g[e.dest]=(g[e.dest]||0)+1)}));const m=o.shapes.concat(o.autoShapes).map((e=>({shape:e,current:!1,hash:i(e,g,!1)})));f&&m.push({shape:f,current:!0,hash:i(f,g,!0)});const b=m.map((e=>e.hash)).join("");if(b===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=b;const v=t.firstChild;!function(e,t,o){const n={};let r;t.forEach((t=>{t.shape.dest&&(r=e.brushes[t.shape.brush],t.shape.modifiers&&(r=d(r,t.shape.modifiers)),n[r.key]=r)}));const i={};let s=o.firstChild;for(;s;)i[s.getAttribute("cgKey")]=!0,s=s.nextSibling;for(let c in n)i[c]||o.appendChild(a(n[c]))}(o,m,v),function(e,t,o,i,s,a){const f=e.dom.bounds(),g={},m=[];t.forEach((e=>{g[e.hash]=!1}));let b,v=a.nextSibling;for(;v;)b=v.getAttribute("cgHash"),g.hasOwnProperty(b)?g[b]=!0:m.push(v),v=v.nextSibling;m.forEach((e=>s.removeChild(e))),t.forEach((t=>{g[t.hash]||s.appendChild(function(e,{shape:t,current:o,hash:i},s,a,f){let g;if(t.piece)g=function(e,t,o,n,i){const s=h(t,n,i),a=n.width/i.width*(o.scale||1),l=n.height/i.height*(o.scale||1),d=o.color[0]+("knight"===o.role?"n":o.role[0]).toUpperCase();return c(r("image"),{className:`${o.role} ${o.color}`,x:s[0]-a/2,y:s[1]-l/2,width:a,height:l,href:e+d+".svg"})}(e.drawable.pieces.baseUrl,l(n.key2pos(t.orig),e.orientation,e.dimensions),t.piece,f,e.dimensions);else{const i=l(n.key2pos(t.orig),e.orientation,e.dimensions);if(t.orig&&t.dest){let m=s[t.brush];t.modifiers&&(m=d(m,t.modifiers)),g=function(e,t,o,n,i,s,a){const l=function(e,t,o){return(t?20:10)/(64*o.width)*e.width}(s,i&&!n,a),d=h(t,s,a),f=h(o,s,a),g=f[0]-d[0],m=f[1]-d[1],b=Math.atan2(m,g),v=Math.cos(b)*l,w=Math.sin(b)*l;return c(r("line"),{stroke:e.color,"stroke-width":u(e,n,s,a),"stroke-linecap":"round","marker-end":"url(#arrowhead-"+e.key+")",opacity:p(e,n),x1:d[0],y1:d[1],x2:f[0]-v,y2:f[1]-w})}(m,i,l(n.key2pos(t.dest),e.orientation,e.dimensions),o,a[t.dest]>1,f,e.dimensions)}else g=function(e,t,o,n,i){const s=h(t,n,i),a=function(e,t){const o=e.width/(64*t.width);return[3*o,4*o]}(n,i),l=n.width/i.width/2;return c(r("circle"),{stroke:e.color,"stroke-width":a[o?0:1],fill:"none",opacity:p(e,o),cx:s[0],cy:s[1],r:l-a[1]/2})}(s[t.brush],i,o,f,e.dimensions)}return g.setAttribute("cgHash",i),g}(e,t,o,i,f))}))}(e,m,o.brushes,g,t,v)}},{"./util":18}],17:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.shogiVariants=o.dimensions=o.ranks=o.files=void 0,o.files=["a","b","c","d","e","f","g","h","i","j"],o.ranks=["1","2","3","4","5","6","7","8","9",":"],o.dimensions=[{width:8,height:8},{width:9,height:9},{width:10,height:8},{width:9,height:10},{width:10,height:10},{width:5,height:5},{width:7,height:7},{width:3,height:4},{width:5,height:6}],o.shogiVariants=["shogi","minishogi","kyotoshogi","dobutsu","gorogoro"]},{}],18:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.createEl=o.isRightButton=o.eventPosition=o.setVisible=o.translateRel=o.translateAbs=o.posToTranslateRel=o.posToTranslateAbs=o.samePiece=o.distanceSq=o.containsX=o.opposite=o.timer=o.memo=o.key2pos=o.pos2key=o.allKeys=o.invNRanks=o.NRanks=o.colors=void 0;const n=e("./types");o.colors=["white","black"],o.NRanks=[1,2,3,4,5,6,7,8,9,10],o.invNRanks=[10,9,8,7,6,5,4,3,2,1],o.allKeys=function(e){const t=n.dimensions[e];return Array.prototype.concat(...(o=t.width,n.files.slice(0,o)).map((e=>function(e){return n.ranks.slice(0,e)}(t.height).map((t=>e+t)))));var o},o.pos2key=function(e){return n.files[e[0]-1]+n.ranks[e[1]-1]},o.key2pos=function(e){return[e.charCodeAt(0)-96,e.charCodeAt(1)-48]},o.memo=function(e){let t;const o=()=>(void 0===t&&(t=e()),t);return o.clear=()=>{t=void 0},o},o.timer=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},o.opposite=e=>"white"===e?"black":"white",o.containsX=function(e,t){return void 0!==e&&-1!==e.indexOf(t)},o.distanceSq=(e,t)=>Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2),o.samePiece=(e,t)=>e.role===t.role&&e.color===t.color;const r=(e,t,o,n,r)=>[(t?e[0]-1:r.width-e[0])*o,(t?r.height-e[1]:e[1]-1)*n];o.posToTranslateAbs=(e,t)=>{const o=e.width/t.width,n=e.height/t.height;return(e,i)=>r(e,i,o,n,t)},o.posToTranslateRel=(e,t,o)=>r(e,t,100/o.width,100/o.height,o),o.translateAbs=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},o.translateRel=(e,t)=>{e.style.transform=`translate(${t[0]}%,${t[1]}%)`},o.setVisible=(e,t)=>{e.style.visibility=t?"visible":"hidden"},o.eventPosition=e=>e.clientX||0===e.clientX?[e.clientX,e.clientY]:e.touches&&e.targetTouches[0]?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0,o.isRightButton=e=>2===e.buttons||2===e.button,o.createEl=(e,t)=>{const o=document.createElement(e);return t&&(o.className=t),o}},{"./types":17}],19:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util"),r=e("./types"),i=e("./svg");function s(e,t){const o=n.createEl("coords",t);let r;for(let i in e)r=n.createEl("coord"),r.textContent=e[i],o.appendChild(r);return o}o.default=function(e,t,o){e.innerHTML="",e.classList.add("cg-wrap"),n.colors.forEach((o=>e.classList.toggle("orientation-"+o,t.orientation===o))),e.classList.toggle("manipulable",!t.viewOnly);const a=n.createEl("cg-helper");e.appendChild(a);const c=n.createEl("cg-container");a.appendChild(c);const l=n.createEl("extension");c.appendChild(l);const d=n.createEl("cg-board");let u,p;if(c.appendChild(d),t.drawable.visible&&!o&&(u=i.createElement("svg"),u.appendChild(i.createElement("defs")),c.appendChild(u)),t.coordinates){const e="black"===t.orientation?" black":"";r.shogiVariants.includes(t.variant)?(c.appendChild(s(r.ranks.slice(0,t.dimensions.height).reverse(),"files"+e)),c.appendChild(s(r.ranks.slice(0,t.dimensions.width).reverse(),"ranks"+e))):6===t.notation?(c.appendChild(s(["0"].concat(r.ranks.slice(0,9).reverse()),"ranks"+e)),c.appendChild(s(r.ranks.slice(0,9),"files"+e))):(c.appendChild(s(r.ranks.slice(0,t.dimensions.height),"ranks"+e)),c.appendChild(s(r.files.slice(0,t.dimensions.width),"files"+e)))}return t.draggable.showGhost&&!o&&(p=n.createEl("piece","ghost"),n.setVisible(p,!1),c.appendChild(p)),{board:d,container:c,ghost:p,svg:u}}},{"./svg":16,"./types":17,"./util":18}]},{},[12])(12)}));